<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adi Sonaton TV | Admin Panel</title>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root { --blue: #1e3c72; --red: #e12229; --gray: #f4f7f6; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Hind Siliguri', sans-serif; }
        body { background: var(--gray); display: flex; }

        /* ‡¶∏‡¶æ‡¶á‡¶°‡¶¨‡¶æ‡¶∞ */
        .sidebar { width: 250px; height: 100vh; background: var(--blue); color: #fff; padding: 20px; position: fixed; }
        .sidebar h2 { margin-bottom: 30px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 10px; }
        .sidebar button { width: 100%; padding: 12px; margin-bottom: 10px; border: none; background: rgba(255,255,255,0.1); color: #fff; cursor: pointer; text-align: left; border-radius: 5px; font-weight: 600; }
        .sidebar button:hover { background: var(--red); }

        /* ‡¶Æ‡ßá‡¶á‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü */
        .main-content { margin-left: 250px; width: calc(100% - 250px); padding: 30px; }
        .section { background: #fff; padding: 25px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); margin-bottom: 40px; display: none; }
        .active { display: block; }
        
        h3 { margin-bottom: 20px; color: var(--blue); border-left: 4px solid var(--red); padding-left: 10px; }
        
        /* ‡¶´‡¶∞‡¶Æ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        input, select, textarea { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 5px; outline: none; }
        button.submit-btn { background: var(--blue); color: #fff; padding: 12px 25px; border: none; border-radius: 5px; cursor: pointer; font-weight: 700; }
        button.submit-btn:hover { background: var(--red); }

        /* ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        .item-list { margin-top: 30px; }
        .item { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #eee; background: #fafafa; margin-bottom: 5px; }
        .item img { width: 50px; height: 40px; object-fit: cover; border-radius: 3px; }
        .del-btn { background: var(--red); color: #fff; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px; }
    </style>
</head>
<body>

<div class="sidebar">
    <h2>‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</h2>
    <button onclick="showSection('news-sec')">üì∞ ‡¶®‡¶ø‡¶â‡¶ú ‡¶Ü‡¶™‡¶≤‡ßã‡¶°</button>
    <button onclick="showSection('video-sec')">üé• ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ó‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡¶ø</button>
    <button onclick="showSection('opinion-sec')">‚úçÔ∏è ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶∏‡ßç‡¶≤‡¶æ‡¶á‡¶°‡¶æ‡¶∞</button>
    <br><br>
    <button onclick="location.href='index.html'" style="background: #000;">üè† ‡¶π‡ßã‡¶Æ‡¶™‡ßá‡¶ú‡ßá ‡¶Ø‡¶æ‡¶®</button>
</div>

<div class="main-content">
    
    <div id="news-sec" class="section active">
        <h3>‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡¶Ç‡¶¨‡¶æ‡¶¶ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
        <input type="text" id="news-title" placeholder="‡¶∏‡¶Ç‡¶¨‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ">
        <select id="news-category">
            <option value="bangladesh">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂</option>
            <option value="national">‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º</option>
            <option value="international">‡¶Ü‡¶®‡ßç‡¶§‡¶∞‡ßç‡¶ú‡¶æ‡¶§‡¶ø‡¶ï</option>
            <option value="sports">‡¶ñ‡ßá‡¶≤‡¶æ</option>
            <option value="entertainment">‡¶¨‡¶ø‡¶®‡ßã‡¶¶‡¶®</option>
            <option value="religion">‡¶ß‡¶∞‡ßç‡¶Æ‡¶§‡¶§‡ßç‡¶¨</option>
        </select>
        <input type="text" id="news-image" placeholder="‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï (Image URL)">
        <textarea id="news-content" rows="5" placeholder="‡¶∏‡¶Ç‡¶¨‡¶æ‡¶¶‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§..."></textarea>
        <button class="submit-btn" onclick="uploadNews()">‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>

        <div class="item-list" id="news-list"></div>
    </div>

    <div id="video-sec" class="section">
        <h3>‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ó‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡¶ø (‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ß¨‡¶ü‡¶ø)</h3>
        <p style="font-size: 13px; color: #666; margin-bottom: 10px;">‡¶á‡¶â‡¶ü‡¶ø‡¶â‡¶¨ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì‡¶∞ Embed ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
        <input type="text" id="vid-url" placeholder="‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶Æ‡¶¨‡ßá‡¶° ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï (iframe src)">
        <input type="text" id="vid-caption" placeholder="‡¶≠‡¶ø‡¶°‡¶ø‡¶ì‡¶∞ ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ">
        <button class="submit-btn" onclick="uploadVideo()">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</button>

        <div class="item-list" id="video-list"></div>
    </div>

    <div id="opinion-sec" class="section">
        <h3>‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶∏‡ßç‡¶≤‡¶æ‡¶á‡¶°‡¶æ‡¶∞ (‡ßß‡ß¶-‡ßß‡ß´‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø)</h3>
        <input type="text" id="op-image" placeholder="‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶®‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï">
        <button class="submit-btn" onclick="uploadOpinion()">‡¶∏‡ßç‡¶≤‡¶æ‡¶á‡¶°‡¶æ‡¶∞‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</button>

        <div class="item-list" id="opinion-list"></div>
    </div>

</div>

<script>
    const SUPABASE_URL = 'https://vplqtnrziptqeeusdabv.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZwbHF0bnJ6aXB0cWVldXNkYWJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEwNDU1NDIsImV4cCI6MjA4NjYyMTU0Mn0.yMs0N0dMIImliu6PscOeKh_gYlvl184AESug-LVDKok';
    const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    function showSection(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        if(id === 'news-sec') loadNews();
        if(id === 'video-sec') loadVideos();
        if(id === 'opinion-sec') loadOpinions();
    }

    // ‡¶®‡¶ø‡¶â‡¶ú ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    async function uploadNews() {
        const title = document.getElementById('news-title').value;
        const category = document.getElementById('news-category').value;
        const image_url = document.getElementById('news-image').value;
        const content = document.getElementById('news-content').value;

        if(!title || !image_url) return alert('‡¶∏‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ò‡¶∞ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®');

        const { error } = await supabase.from('news_portal').insert([{ title, category, image_url, content }]);
        if(!error) { alert('‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá!'); location.reload(); }
    }

    async function loadNews() {
        const { data } = await supabase.from('news_portal').select('*').order('id', {ascending: false});
        document.getElementById('news-list').innerHTML = data.map(n => `
            <div class="item">
                <div><img src="${n.image_url}"> <b>${n.title}</b></div>
                <button class="del-btn" onclick="deleteItem('news_portal', ${n.id})">‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßÅ‡¶®</button>
            </div>
        `).join('');
    }

    // ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    async function uploadVideo() {
        const video_url = document.getElementById('vid-url').value;
        const caption = document.getElementById('vid-caption').value;
        if(!video_url) return alert('‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¶‡¶ø‡¶®');

        const { error } = await supabase.from('videos').insert([{ video_url, caption }]);
        if(!error) { alert('‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡ßü‡ßá‡¶õ‡ßá!'); loadVideos(); }
    }

    async function loadVideos() {
        const { data } = await supabase.from('videos').select('*');
        document.getElementById('video-list').innerHTML = data.map(v => `
            <div class="item">
                <span>${v.caption}</span>
                <button class="del-btn" onclick="deleteItem('videos', ${v.id})">‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßÅ‡¶®</button>
            </div>
        `).join('');
    }

    // ‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    async function uploadOpinion() {
        const image_url = document.getElementById('op-image').value;
        if(!image_url) return alert('‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¶‡¶ø‡¶®');

        const { error } = await supabase.from('opinions').insert([{ image_url }]);
        if(!error) { alert('‡¶Æ‡¶§‡¶æ‡¶Æ‡¶§ ‡¶õ‡¶¨‡¶ø ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡ßü‡ßá‡¶õ‡ßá!'); loadOpinions(); }
    }

    async function loadOpinions() {
        const { data } = await supabase.from('opinions').select('*');
        document.getElementById('opinion-list').innerHTML = data.map(o => `
            <div class="item">
                <img src="${o.image_url}">
                <button class="del-btn" onclick="deleteItem('opinions', ${o.id})">‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßÅ‡¶®</button>
            </div>
        `).join('');
    }

    // ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    async function deleteItem(table, id) {
        if(confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§?')) {
            const { error } = await supabase.from(table).delete().eq('id', id);
            if(!error) location.reload();
        }
    }

    window.onload = loadNews;
</script>

</body>
</html>
